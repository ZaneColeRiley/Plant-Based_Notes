jQuery(function($){var container=$(document.getElementById('load-more-container'));var btn=$(document.getElementById('load-more-btn'));var template=btn.data('template');btn.on('click',function(){var offset=btn.data('offset');var arguments=btn.data('args');var data={action:'load_more',offset:offset,args:arguments,template:template};if(template==='category'){data.landingId=btn.data('landingid');data.promoIndex=btn.data('promoindex');}
if(template==='home'){data.promoNum=btn.data('promo-num');data.promoTotal=btn.data('promo-total');}
$.ajax({type:"GET",data:data,dataType:"json",url:ajax_obj.url,beforeSend:function(){btn.addClass('loading');},success:function(response){if(response){container.append(response.results);btn.removeClass('loading');if(response.hasOwnProperty('promoindex')){btn.attr('data-promoindex',response.promoindex);}
if(response.hasOwnProperty('end')&&response.end===true){btn.hide();}
if(template==='home'){var new_div=$('.more-posts-block').last();new Foundation.Equalizer(new_div).applyHeight();if(Foundation.MediaQuery.atLeast('medium')){socialToggle();}
btn.data('offset',parseInt(offset,10)+8);btn.data('promo-num',promo_increment(parseInt(response.promoNum,10),parseInt(data.promoTotal,10)));sendEvent(petaGA_LinkCategory_Link,petaGA_GenericAction_ClickThrough,'Homepage More Posts Button');}else{$(document).foundation();btn.data('offset',parseInt(offset,10)+parseInt(ajax_obj.posts_per_page,10));}}},error:function(jqXHR,textStatus,errorThrown,data){console.log(jqXHR+" :: "+textStatus+" :: "+errorThrown);}});});function promo_increment(promo_num,promo_total){var difference=promo_total-promo_num;if(2===difference){promo_num=0;}else if(1===difference){promo_num=1;}else{promo_num+=2;}
return promo_num;}});